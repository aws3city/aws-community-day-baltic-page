{{ define "main" }}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 text-center mb-4">
      <h1 class="h2 m-0">{{ .Title }}</h1>
    </div>
  </div>

  <style>
    .speakers-list .avatar {
      width: 76px;
      height: 76px;
      border-radius: 9999px;
      object-fit: cover;
      display: block;
      background: #17202c;
    }
    .speakers-list .speaker-name { font-weight: 700; }
    .speakers-list .speaker-sub { color: rgba(255,255,255,.75); }
  </style>

  <div class="row gy-4 speakers-list">
    {{- $all := where site.RegularPages "Section" "speakers" -}}
    {{- $items := sort $all "Title" -}}
    {{- range $items -}}
      {{- $photo := .Resources.GetMatch "img/photo*" -}}
      {{- if not $photo -}}
        {{- $photo = .Resources.GetMatch "img/*" -}}
      {{- end -}}
      {{- $href := .Params.talk | default .RelPermalink -}}
      <div class="col-12 col-lg-4">
        <div class="d-flex align-items-center gap-3">
          <a href="{{ $href }}" {{ if .Params.talk }}target="_blank" rel="noopener"{{ end }} class="d-inline-block flex-shrink-0">
            {{- if $photo -}}
              <img src="{{ $photo.RelPermalink }}" alt="{{ .Title }}" class="avatar" loading="lazy" />
            {{- else -}}
              <div class="avatar"></div>
            {{- end -}}
          </a>
          <div class="text-start">
            <div class="speaker-name">{{ .Title }}</div>
            {{- $role := .Params.role -}}
            {{- $company := .Params.company -}}
            {{- $headline := .Params.headline -}}
            {{- $location := .Params.location -}}
            {{- if or $headline (or $role $company) -}}
              <div class="speaker-sub">
                {{- if $headline -}}
                  {{ $headline }}
                {{- else -}}
                  {{- if $role -}}{{ $role }}{{- end -}}{{- if and $role $company -}} @ {{- end -}}{{- if $company -}}{{ $company }}{{- end -}}
                {{- end -}}
              </div>
            {{- end -}}
            {{- if $location -}}
              <div class="speaker-sub">{{ $location }} {{ partial "flag.html" $location }}</div>
            {{- end -}}
          </div>
        </div>
      </div>
    {{- end -}}
  </div>
</div>
{{ end }}


