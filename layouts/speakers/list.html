{{ define "main" }}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 text-center mb-4">
      <h1 class="h2 m-0">{{ .Title }}</h1>
    </div>
  </div>

  <style>
    .speakers-list .avatar-frame { width: 76px; height: 76px; border-radius: 9999px; background:#17202c; overflow:hidden; display:block; box-shadow: 0 0 0 0 rgba(0,0,0,0); transition: box-shadow .2s ease; }
    .speakers-list .avatar-frame img { width:100%; height:100%; object-fit:cover; object-position: 50% 25%; display:block; }
    .speakers-list a.avatar-link:hover .avatar-frame { box-shadow: 0 0 0 3px #6f42c1, 0 0 14px 6px #ff9900; }
    .speakers-list .avatar-frame.is-hero { box-shadow: 0 0 0 2px #ff9900, 0 0 10px 4px #6f42c1; }
    .speakers-list .avatar-frame.is-builder { box-shadow: 0 0 0 2px #0ea5e9, 0 0 10px 4px #22d3ee; }
    .speakers-list .speaker-name { font-weight: 700; }
    .speakers-list .speaker-sub { color: rgba(255,255,255,.75); }
    .speakers-list .speaker-text { flex: 1 1 auto; min-width: 0; }
    .speakers-list .role-badges .badge { border:0; background: rgba(255,255,255,.12); color: #fff; font-weight:600; }
    .speakers-list .role-badges .badge.hero { background: linear-gradient(90deg, #ff9900, #6f42c1); }
    .speakers-list .role-badges .badge.builder { background: linear-gradient(90deg, #22d3ee, #0ea5e9); }
  </style>

  <div class="row gy-4 speakers-list">
    {{- $all := where site.RegularPages "Section" "speakers" -}}
    {{- $items := sort $all "Title" -}}
    {{- range $items -}}
      {{- $photo := .Resources.GetMatch "img/photo*" -}}
      {{- if not $photo -}}
        {{- $photo = .Resources.GetMatch "img/*" -}}
      {{- end -}}
      {{- $href := .Params.talk | default .RelPermalink -}}
      {{- $headline := .Params.headline | default "" -}}
      {{- $headlineLower := lower $headline -}}
      {{- $isHero := or (in $headlineLower "hero") (eq (printf "%v" .Params.hero) "true") -}}
      {{- $isBuilder := or (in $headlineLower "community builder") (eq (printf "%v" .Params.community_builder) "true") -}}
      <div class="col-12 col-lg-4">
        <div class="d-flex align-items-start gap-3">
          <a href="{{ $href }}" {{ if .Params.talk }}target="_blank" rel="noopener"{{ end }} class="d-inline-block flex-shrink-0 avatar-link">
            {{- if $photo -}}
              <span class="avatar-frame {{ if $isHero }}is-hero{{ else if $isBuilder }}is-builder{{ end }}"><img src="{{ $photo.RelPermalink }}" alt="{{ .Title }}" loading="lazy" /></span>
            {{- else -}}
              <span class="avatar-frame {{ if $isHero }}is-hero{{ else if $isBuilder }}is-builder{{ end }}"></span>
            {{- end -}}
          </a>
          <div class="text-start speaker-text">
            <div class="speaker-name">{{ .Title }}</div>
            {{- $role := .Params.role -}}
            {{- $company := .Params.company -}}
            {{- $location := .Params.location -}}
            {{- if or $headline (or $role $company) -}}
              <div class="speaker-sub">
                {{- if $headline -}}
                  {{ $headline }}
                {{- else -}}
                  {{- if $role -}}{{ $role }}{{- end -}}{{- if and $role $company -}} @ {{- end -}}{{- if $company -}}{{ $company }}{{- end -}}
                {{- end -}}
              </div>
            {{- end -}}
            {{- if $location -}}
              <div class="speaker-sub">{{ $location }} {{ partial "flag.html" $location }}</div>
            {{- end -}}
            {{- if or $isHero $isBuilder -}}
              <div class="role-badges mt-1 d-flex gap-2 flex-wrap">
                {{- if $isHero -}}<span class="badge hero">AWS Hero</span>{{- end -}}
                {{- if $isBuilder -}}<span class="badge builder">AWS Community Builder</span>{{- end -}}
              </div>
            {{- end -}}
          </div>
        </div>
      </div>
    {{- end -}}
  </div>
</div>
{{ end }}


