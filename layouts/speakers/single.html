{{ define "main" }}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">
      <div class="row g-4 align-items-start">
        <div class="col-12 col-md-4">
          <style>
            .speaker-photo-frame { background:#17202c; border-radius:.75rem; overflow:hidden; width:100%; aspect-ratio: 4 / 3; position:relative; display:block; }
            .speaker-photo-frame img { width:100%; height:100%; object-fit:cover; object-position: 50% 25%; display:block; }
            .speaker-photo-frame.is-clickable { cursor:pointer; }
            .speaker-photo-frame.is-clickable:hover { box-shadow: 0 0 0 3px #6f42c1, 0 0 18px 8px #ff9900; }
          </style>
          {{- $photo := .Resources.GetMatch "img/photo*" -}}
          {{- if not $photo -}}
            {{- $photo = .Resources.GetMatch "img/*" -}}
          {{- end -}}
          {{- if .Params.talk -}}
            <a href="{{ .Params.talk }}" target="_blank" rel="noopener" class="speaker-photo-frame is-clickable mb-3">
              {{- if $photo -}}
                <img src="{{ $photo.RelPermalink }}" alt="{{ .Title }}"/>
              {{- else -}}
                <div class="text-white-50 d-flex align-items-center justify-content-center w-100 h-100">No photo</div>
              {{- end -}}
            </a>
          {{- else -}}
            <div class="speaker-photo-frame mb-3">
              {{- if $photo -}}
                <img src="{{ $photo.RelPermalink }}" alt="{{ .Title }}"/>
              {{- else -}}
                <div class="text-white-50 d-flex align-items-center justify-content-center w-100 h-100">No photo</div>
              {{- end -}}
            </div>
          {{- end -}}
        </div>
        <div class="col-12 col-md-8">
          {{- $talkTitle := .Params.summary | default "TBD" -}}
          <div class="mb-2 h4 m-0">{{ $talkTitle }}</div>
          {{- $format := .Params.format -}}
          {{- $level := .Params.level -}}
          {{- if or $format $level -}}
            <div class="mb-3 d-flex flex-wrap gap-2">
              {{- with $format -}}<span class="badge bg-secondary">{{ . }}</span>{{- end -}}
              {{- with $level -}}<span class="badge bg-secondary">Level {{ . }}</span>{{- end -}}
            </div>
          {{- end -}}
          <h1 class="h3">{{ .Title }}</h1>
          <div class="mb-2 d-flex flex-wrap gap-2 align-items-center">
            {{- with .Params.linkedin -}}<a href="{{ . }}" target="_blank" rel="noopener" title="LinkedIn">🔗</a>{{- end -}}
            {{- with .Params.twitter -}}<a href="{{ . }}" target="_blank" rel="noopener" title="X / Twitter">𝕏</a>{{- end -}}
            {{- with .Params.website -}}<a href="{{ . }}" target="_blank" rel="noopener" title="Website">🌐</a>{{- end -}}
            {{- with .Params.blog -}}<a href="{{ . }}" target="_blank" rel="noopener" title="Blog">📝</a>{{- end -}}
            {{- with .Params.instagram -}}<a href="{{ . }}" target="_blank" rel="noopener" title="Instagram">📸</a>{{- end -}}
            {{- with .Params.github -}}<a href="{{ . }}" target="_blank" rel="noopener" title="GitHub">🐙</a>{{- end -}}
            {{- with .Params.slideshare -}}<a href="{{ . }}" target="_blank" rel="noopener" title="SlideShare">📑</a>{{- end -}}
            {{- with .Params.bluesky -}}<a href="{{ . }}" target="_blank" rel="noopener" title="Bluesky">🌀</a>{{- end -}}
          </div>
          {{- $role := .Params.role -}}
          {{- $company := .Params.company -}}
          {{- $location := .Params.location -}}
          {{- $headline := .Params.headline | default "" -}}
          {{- $headlineLower := lower $headline -}}
          {{- $isHero := or (in $headlineLower "hero") (eq (printf "%v" .Params.hero) "true") -}}
          {{- $isBuilder := or (in $headlineLower "community builder") (eq (printf "%v" .Params.community_builder) "true") -}}
          {{- if or $role $company -}}
            <div class="text-white-50 mb-3">
              {{- if $role -}}{{ $role }}{{- end -}}{{- if and $role $company -}}, {{- end -}}{{- if $company -}}{{ $company }}{{- end -}}
            </div>
          {{- end -}}
          {{- if or $isHero $isBuilder -}}
            <div class="mb-3 d-flex gap-2 flex-wrap">
              {{- if $isHero -}}<span class="badge" style="background:linear-gradient(90deg,#ff9900,#6f42c1);border:0;">AWS Hero</span>{{- end -}}
              {{- if $isBuilder -}}<span class="badge" style="background:linear-gradient(90deg,#22d3ee,#0ea5e9);border:0;">AWS Community Builder</span>{{- end -}}
            </div>
          {{- end -}}
          {{- if $location -}}
            <div class="text-white-50 mb-3">{{ $location }} {{ partial "flag.html" (dict "location" $location "page" .) }}</div>
          {{- end -}}
          
          <div class="content">{{ .Content }}</div>
          {{- with .Params.talk -}}
            <div class="mt-4">
              <a class="btn-acd" href="{{ . }}" target="_blank" rel="noopener">View Talk</a>
            </div>
          {{- end -}}
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}


