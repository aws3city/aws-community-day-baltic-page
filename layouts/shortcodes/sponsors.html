{{/*
  Custom sponsors shortcode override
  Usage: {{< sponsors level="gold" >}}
  Renders sponsor logos by level, linking to the sponsor website if provided.
*/}}
{{- $section := .Get "section" | default "sponsors" -}}
{{- $level := .Get "level" -}}
{{- $all := where site.RegularPages "Section" $section -}}
{{- $items := $all -}}
{{- if $level -}}
  {{- $items = where $all ".Params.level" "==" $level -}}
{{- end -}}
{{- if gt (len $items) 0 -}}
  {{- $scopeClass := printf "sponsors-%s" (or $level "all") -}}
  <div class="row justify-content-center align-items-center g-4 sponsors {{ $scopeClass }}">
    <style>
      /* Scope styles to this sponsors block only */
      .sponsors.{{ $scopeClass }} .logo-box {
        height: 110px;
        /* prevent layout shifts and keep consistent visual size */
        display: flex;
        align-items: center;
        justify-content: center;
        transition: box-shadow .2s ease;
      }
      .sponsors.{{ $scopeClass }} .logo-box img {
        max-height: 100%;
        max-width: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
      }
      /* Make gold sponsor logos larger (2x from previous) */
      .sponsors.sponsors-gold .logo-box { height: 440px; }
      /* Per-brand tweaks */
      .sponsors.{{ $scopeClass }} .logo-box.logo-epam img,
      .sponsors.{{ $scopeClass }} .logo-box.logo-cloudsy img { max-height: 80%; }
      /* Hover glows by category */
      .sponsors.sponsors-gold a:hover .logo-box { box-shadow: 0 0 0 3px #d4af37, 0 0 18px 8px rgba(212,175,55,.6); }
      .sponsors.sponsors-bronze a:hover .logo-box { box-shadow: 0 0 0 3px #cd7f32, 0 0 18px 8px rgba(205,127,50,.6); }
      .sponsors.sponsors-venue a:hover .logo-box,
      .sponsors.sponsors-main a:hover .logo-box,
      .sponsors.sponsors-all a:hover .logo-box { box-shadow: 0 0 0 3px #6c7a89, 0 0 16px 8px rgba(108,122,137,.5); }
      .sponsors.sponsors-patronage a:hover .logo-box,
      .sponsors.sponsors-organised-by a:hover .logo-box { box-shadow: 0 0 0 3px #6f42c1, 0 0 16px 8px #ff9900; }
    </style>
    {{- range $items -}}
      {{- $logo := .Resources.GetMatch "img/logo*" -}}
      {{- if not $logo -}}
        {{- $logo = .Resources.GetMatch "img/*" -}}
      {{- end -}}
      {{- $href := .Params.website | default .RelPermalink -}}
      {{- $slug := urlize .Title -}}
      <div class="col-6 col-md-4 col-lg-3 text-center">
        <a href="{{ $href }}" target="_blank" rel="noopener" class="d-inline-block p-2 w-100">
          {{- if $logo -}}
            <div class="logo-box logo-{{ $slug }}">
              <img src="{{ $logo.RelPermalink }}" alt="{{ .Title }} logo" loading="lazy" />
            </div>
          {{- else -}}
            <div class="logo-box text-white-50">{{ .Title }}</div>
          {{- end -}}
        </a>
      </div>
    {{- end -}}
  </div>
{{- end -}}


